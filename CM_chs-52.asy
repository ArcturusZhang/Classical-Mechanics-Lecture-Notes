if(!settings.multipleView) settings.batchView=false;
settings.tex="xelatex";
defaultfilename="CM_chs-52";
if(settings.render < 0) settings.render=4;
settings.outformat="";
settings.inlineimage=true;
settings.embed=true;
settings.toolbar=false;
viewportmargin=(2,2);

texpreamble("\usepackage{xeCJK}");
texpreamble("\setCJKmainfont{SimSun}");
usepackage("amsmath");
import graph;
import math;
size(350);
//散射截面
pair O;
real E0,p,e,theta0,theta1,theta2,b,l,delta,r1,r0,alpha,lb,lc,x0,bb;
picture tmp;
O = (0,0);
real fr(real theta){
return p/(e*cos(theta)-1);
}
pair xy(real theta){
return (fr(theta)*cos(theta),fr(theta)*sin(theta));
}
r1 = 1.3;
draw(tmp,scale(r1)*unitcircle);
l = 7;
lb = 6;
lc = 5;
delta = 0.03;
alpha = 1/3;
E0 = 1.5;
b = 0.96;
p = E0*b*b;
e = sqrt(1+2*E0*E0*b*b);
theta0 = acos(1/e);
theta1 = theta0;
draw(tmp,rotate(180-theta0/pi*180)*graph(xy,-theta0+delta*pi,theta0-delta*pi),red+linewidth(1bp));
draw(tmp,O--l*dir(180-2*theta0/pi*180),red+dashed);
draw(tmp,shift(lc*dir(180))*xscale(alpha)*arc(O,0.72*b,-90,90),dashed);
draw(tmp,shift(lc*dir(180))*xscale(alpha)*arc(O,0.72*b,90,270));
draw(tmp,Label("$b$",MidPoint,Relative(W)),lb*dir(180)--lb*dir(180)+0.72*b*dir(90),Arrow);
x0 = (1-alpha**2)*r1*cos(pi-2*theta0);
bb = sqrt(r1**2-x0**2/(1-alpha**2));
draw(tmp,shift((x0,0))*xscale(alpha)*arc(O,bb,80,360-80));
draw(tmp,shift((x0,0))*xscale(alpha)*arc(O,bb,-80,80),dashed);
b = 1.2;
p = E0*b*b;
e = sqrt(1+2*E0*E0*b*b);
theta0 = acos(1/e);
theta2 = theta0;
draw(tmp,rotate(180-theta0/pi*180)*graph(xy,-theta0+delta*pi,theta0-delta*pi),blue+linewidth(1bp));
draw(tmp,O--l*dir(180-2*theta0/pi*180),blue+dashed);
draw(tmp,shift(lc*dir(180))*xscale(alpha)*arc(O,0.75*b,-90,90),dashed);
draw(tmp,shift(lc*dir(180))*xscale(alpha)*arc(O,0.75*b,90,270));
draw(tmp,Label("$\mathrm{d} b$",BeginPoint,Relative(E)),lb*dir(180)+0.75*b*dir(90)+0.72*b*dir(90)--lb*dir(180)+0.75*b*dir(90),Arrow);
x0 = (1-alpha**2)*r1*cos(pi-2*theta0);
bb = sqrt(r1**2-x0**2/(1-alpha**2));
draw(tmp,shift((x0,0))*xscale(alpha)*arc(O,bb,80,360-80));
draw(tmp,shift((x0,0))*xscale(alpha)*arc(O,bb,-80,80),dashed);
dot(tmp,O);
label(tmp,"$O$",O,S);
draw(tmp,l*dir(180)--0.5*l*dir(0));
r0 = 1.9;
draw(tmp,Label("$\theta$",MidPoint,Relative(E)),arc(O,r0,0,180-2*theta1/pi*180),Arrow);
r0 = 2.4;
draw(tmp,Label("$\mathrm{d}\theta$",MidPoint,Relative(E)),arc(O,r0,180-2*theta2/pi*180,180-2*theta1/pi*180),Arrow);
path clp;
clp = scale(l)*unitcircle;
clip(tmp,clp);
label(tmp,"$\mathrm{d} \omega = 2\pi \sin \theta\mathrm{d} \theta$",r1*dir(-47),SE);
add(tmp);
